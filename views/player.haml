!!! 5
%html
  %head
    %title= "Karaoke"
    %link{:rel => "stylesheet", :type => "text/css", :href => "/hisaishi-style.css?1"}
    %script{:type => "text/javascript",:src  => "/lib/jquery-1.7.2.min.js"}
    %script{:type => "text/javascript",:src  => "/lib/jquery.json-2.3.js"}
    %script{:type => "text/javascript",:src  => "/lib/reconnecting-websocket.js"}
    %script{:type => "text/javascript",:src  => "/lib/jquery.websocket-0.0.1.js"}
    %script{:type => "text/javascript",:src  => "/mediaelement-and-player.min.js"}
    %script{:type => "text/javascript",:src  => "/HisaishiEngine.js"}
    %script{:type => "text/javascript",:src  => "/scripts/HisaishiPlayer.js"}
    %script{:type => "text/javascript",:src  => "/scripts/HisaishiAnnouncements.js"}
    %script{:type => "text/javascript",:src  => "/effects.js"}
    %script{:type => "text/javascript",:src  => "/html5slider.js"}
    :javascript
      var csrf = "";
      var trax = {};
      var hl = null;
      var ha = null;
      $(document).ready(function(){
        hl = new HisaishiPlayer({
          source: '/queue.jsonp',
          socket: 'ws://' + document.location.host + '/socket',
          hsParams: {
            preroll: {
              line: 1000,
              word: 200
            }
          },
          containers: {
            display: '#hisaishi-display',
            list:  '#hisaishi-list'
          },
          countdown: 30
        });
        
        ha = new HisaishiAnnouncements({
          source: '/announce.jsonp',
          socket: 'ws://' + document.location.host + '/socket',
          containers: {
            announcements: '#hisaishi-announcements'
          }
        });
        
        // hideCursor();
      });
  %body#hisaishi-queue-player
    #hisaishi-display
    #hisaishi-announcements
    %ol{:id => "hisaishi-list"}
